module.exports=[10710,a=>{"use strict";a.s(["default",()=>K],10710);var b=a.i(87924),c=a.i(16100),d=a.i(72131),e=a.i(4720),f=a.i(15618),g=a.i(87532),h=a.i(77156),i=a.i(25015),j=a.i(48124),k=a.i(16201),l=a.i(41710),m=a.i(73570),n=a.i(33508),o=a.i(44333),p=a.i(42022),q=a.i(21078),r=a.i(49881),s=a.i(33206),t=a.i(69100),u=a.i(97630);let v=d.forwardRef(({className:a,...c},d)=>(0,b.jsx)("textarea",{className:(0,u.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:d,...c}));v.displayName="Textarea";var w=a.i(97074),x=a.i(9020),y=a.i(91119),z=a.i(97942);let A=z.Root,B=z.Trigger,C=z.Portal;z.Close;let D=d.forwardRef(({className:a,...c},d)=>(0,b.jsx)(z.Overlay,{ref:d,className:(0,u.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...c}));D.displayName=z.Overlay.displayName;let E=d.forwardRef(({className:a,children:c,...d},e)=>(0,b.jsxs)(C,{children:[(0,b.jsx)(D,{}),(0,b.jsxs)(z.Content,{ref:e,className:(0,u.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...d,children:[c,(0,b.jsxs)(z.Close,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,b.jsx)(n.X,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));E.displayName=z.Content.displayName;let F=({className:a,...c})=>(0,b.jsx)("div",{className:(0,u.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a),...c});F.displayName="DialogHeader";let G=d.forwardRef(({className:a,...c},d)=>(0,b.jsx)(z.Title,{ref:d,className:(0,u.cn)("text-lg font-semibold leading-none tracking-tight",a),...c}));G.displayName=z.Title.displayName;let H=d.forwardRef(({className:a,...c},d)=>(0,b.jsx)(z.Description,{ref:d,className:(0,u.cn)("text-sm text-muted-foreground",a),...c}));H.displayName=z.Description.displayName;var I=a.i(34450),J=a.i(23292);function K(){return(0,b.jsx)(p.ProtectedRoute,{children:(0,b.jsx)(o.DashboardLayout,{children:(0,b.jsx)(L,{})})})}function L(){let{user:a,getToken:o}=(0,c.useAuth)(),[p,u]=(0,d.useState)([]),[z,C]=(0,d.useState)(!0),[D,K]=(0,d.useState)(""),[L,M]=(0,d.useState)(""),[N,O]=(0,d.useState)(""),[P,Q]=(0,d.useState)(!1),[R,S]=(0,d.useState)(null),[T,U]=(0,d.useState)(null),[V,W]=(0,d.useState)([]),[X,Y]=(0,d.useState)([]),[Z,$]=(0,d.useState)(null),[_,aa]=(0,d.useState)({title:"",description:"",assignedTo:[],dueDate:"",priority:"medium",category:"",estimatedHours:"",project:""});(0,d.useEffect)(()=>{ad(),ab(),ac(),ae()},[]);let ab=async()=>{try{let a=o();if(!a)return void console.error("No authentication token found");let b=await fetch("/api/employees",{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}});if(b.ok){let a=await b.json();console.log("Employees fetched successfully:",a.data?.employees?.length||0,"employees"),W(a.data?.employees||[])}else{let a=await b.json().catch(()=>({}));console.error("Failed to fetch employees:",b.status,a),J.toast.error("Failed to load employees")}}catch(a){console.error("Error fetching employees:",a),J.toast.error("Error loading employees")}},ac=async()=>{try{let a=o();if(!a)return void console.error("No authentication token found");let b=await fetch("/api/projects",{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}});if(b.ok){let a=await b.json();console.log("Projects fetched successfully:",a.data?.projects?.length||0,"projects"),Y(a.data?.projects||[])}else{let a=await b.json().catch(()=>({}));console.error("Failed to fetch projects:",b.status,a),Y([])}}catch(a){console.error("Error fetching projects:",a),Y([])}},ad=async()=>{try{let a=o();if(!a){console.error("No authentication token found"),C(!1);return}let b=await fetch("/api/tasks",{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}});if(b.ok){let a=await b.json();console.log("Tasks fetched successfully:",a.data?.tasks?.length||0,"tasks"),u(a.data?.tasks||[])}else{let a=await b.json().catch(()=>({}));console.error("Failed to fetch tasks:",b.status,a),J.toast.error("Failed to load tasks"),u([])}}catch(a){console.error("Error fetching tasks:",a),J.toast.error("Error loading tasks"),u([])}finally{C(!1)}},ae=async()=>{try{let a=o();if(!a)return void console.error("No authentication token found");let b=await fetch("/api/tasks/stats",{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}});if(b.ok){let a=await b.json();console.log("Task stats fetched successfully"),U(a.data?.stats||null)}else{let a=await b.json().catch(()=>({}));console.error("Failed to fetch task stats:",b.status,a),U(null)}}catch(a){console.error("Error fetching task stats:",a),U(null)}},af=p.filter(a=>{let b=(a.title||"").toLowerCase(),c=(a.description||"").toLowerCase(),d=b.includes(D.toLowerCase())||c.includes(D.toLowerCase()),e=!L||"all"===L||a.status===L,f=!N||"all"===N||a.priority===N;return d&&e&&f}),ag=a=>{switch(a){case"high":return"text-red-600 bg-red-100";case"medium":return"text-yellow-600 bg-yellow-100";case"low":return"text-green-600 bg-green-100";default:return"text-gray-600 bg-gray-100"}},ah=async a=>{$(a);try{let b=o();if(!b)return void J.toast.error("Authentication required");let c=await fetch(`/api/tasks/${a}/start`,{method:"POST",headers:{Authorization:`Bearer ${b}`,"Content-Type":"application/json"}});c.ok?(ad(),ae(),J.toast.success("Task started successfully")):403===c.status?J.toast.error("You don't have permission to start this task."):J.toast.error("Failed to start task. Please try again.")}catch(a){console.error("Error starting task:",a),J.toast.error("An error occurred while starting the task.")}finally{$(null)}},ai=async a=>{$(a);try{let b=o();if(!b)return void J.toast.error("Authentication required");let c=await fetch(`/api/tasks/${a}/stop`,{method:"POST",headers:{Authorization:`Bearer ${b}`,"Content-Type":"application/json"}});c.ok?(ad(),ae(),J.toast.success("Task timer stopped")):403===c.status?J.toast.error("You don't have permission to stop this task."):J.toast.error("Failed to stop task. Please try again.")}catch(a){console.error("Error stopping task:",a),J.toast.error("An error occurred while stopping the task.")}finally{$(null)}},aj=async a=>{$(a);try{let b=o();if(!b)return void J.toast.error("Authentication required");let c=await fetch(`/api/tasks/${a}/complete`,{method:"POST",headers:{Authorization:`Bearer ${b}`,"Content-Type":"application/json"}});c.ok?(ad(),ae(),J.toast.success("Task completed successfully")):403===c.status?J.toast.error("You don't have permission to complete this task."):J.toast.error("Failed to complete task. Please try again.")}catch(a){console.error("Error completing task:",a),J.toast.error("An error occurred while completing the task.")}finally{$(null)}},ak=async a=>{a.preventDefault();try{let a={..._,assignedTo:_.assignedTo.filter(a=>a),project:"none"===_.project?"":_.project},b=o();if(!b)return void J.toast.error("Authentication required");let c=await fetch("/api/tasks",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${b}`},body:JSON.stringify(a)});if(c.ok)Q(!1),aa({title:"",description:"",assignedTo:[],dueDate:"",priority:"medium",category:"",estimatedHours:"",project:""}),ad(),ae(),J.toast.success("Task created successfully");else{let a=await c.json();J.toast.error(a.error||"Failed to create task")}}catch(a){console.error("Error creating task:",a),J.toast.error("Failed to create task")}},al=async(a,b,c)=>{try{let d=o();if(!d)return void J.toast.error("Authentication required");(await fetch(`/api/tasks/${a}/progress`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d}`},body:JSON.stringify({percentage:b,phase:c})})).ok?(ad(),J.toast.success("Progress updated successfully")):J.toast.error("Failed to update progress")}catch(a){console.error("Error updating progress:",a),J.toast.error("Failed to update progress")}};if(z)return(0,b.jsx)("div",{className:"p-6",children:(0,b.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,b.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})})})});let am=a?.role==="admin"||a?.role==="project_manager"||a?.role==="employee"&&a?.designation==="project_manager";return(0,b.jsxs)("div",{className:"container mx-auto p-6 space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"Task Management"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Manage and track all tasks with multiple assignees and progress monitoring"})]}),am&&(0,b.jsxs)(A,{open:P,onOpenChange:Q,children:[(0,b.jsx)(B,{asChild:!0,children:(0,b.jsxs)(r.Button,{children:[(0,b.jsx)(f.Plus,{className:"mr-2 h-4 w-4"}),"Create Task"]})}),(0,b.jsxs)(E,{className:"max-w-2xl",children:[(0,b.jsxs)(F,{children:[(0,b.jsx)(G,{children:"Create New Task"}),(0,b.jsx)(H,{children:"Create a task and assign it to one or more team members"})]}),(0,b.jsxs)("form",{onSubmit:ak,className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(t.Label,{htmlFor:"title",children:"Task Title"}),(0,b.jsx)(s.Input,{id:"title",value:_.title,onChange:a=>aa({..._,title:a.target.value}),required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(t.Label,{htmlFor:"category",children:"Category"}),(0,b.jsx)(s.Input,{id:"category",value:_.category,onChange:a=>aa({..._,category:a.target.value})})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(t.Label,{htmlFor:"description",children:"Description"}),(0,b.jsx)(v,{id:"description",value:_.description,onChange:a=>aa({..._,description:a.target.value}),rows:3,required:!0})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(t.Label,{htmlFor:"project",children:"Project (Optional)"}),(0,b.jsxs)(w.Select,{value:_.project,onValueChange:a=>aa({..._,project:a}),children:[(0,b.jsx)(w.SelectTrigger,{children:(0,b.jsx)(w.SelectValue,{placeholder:"Select project"})}),(0,b.jsxs)(w.SelectContent,{children:[(0,b.jsx)(w.SelectItem,{value:"none",children:"No Project"}),X.map(a=>(0,b.jsx)(w.SelectItem,{value:a._id,children:a.name},a._id))]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(t.Label,{htmlFor:"priority",children:"Priority"}),(0,b.jsxs)(w.Select,{value:_.priority,onValueChange:a=>aa({..._,priority:a}),children:[(0,b.jsx)(w.SelectTrigger,{children:(0,b.jsx)(w.SelectValue,{})}),(0,b.jsxs)(w.SelectContent,{children:[(0,b.jsx)(w.SelectItem,{value:"low",children:"Low"}),(0,b.jsx)(w.SelectItem,{value:"medium",children:"Medium"}),(0,b.jsx)(w.SelectItem,{value:"high",children:"High"}),(0,b.jsx)(w.SelectItem,{value:"critical",children:"Critical"})]})]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(t.Label,{htmlFor:"dueDate",children:"Due Date"}),(0,b.jsx)(s.Input,{id:"dueDate",type:"date",value:_.dueDate,onChange:a=>aa({..._,dueDate:a.target.value}),required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(t.Label,{htmlFor:"estimatedHours",children:"Estimated Hours"}),(0,b.jsx)(s.Input,{id:"estimatedHours",type:"number",value:_.estimatedHours,onChange:a=>aa({..._,estimatedHours:a.target.value})})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(t.Label,{children:"Assign To (Select one or more employees)"}),(0,b.jsxs)("div",{className:"border rounded-lg p-3 space-y-2",children:[_.assignedTo.map((a,c)=>{let d=V.find(b=>b._id===a);return(0,b.jsxs)("div",{className:"flex items-center justify-between bg-muted p-2 rounded",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("span",{className:"font-medium",children:[d?.firstName," ",d?.lastName]}),(0,b.jsxs)("span",{className:"text-sm text-muted-foreground ml-2",children:["- ",d?.designation]})]}),(0,b.jsx)(r.Button,{type:"button",variant:"ghost",size:"sm",onClick:()=>{let a=_.assignedTo.filter((a,b)=>b!==c);aa({..._,assignedTo:a})},children:(0,b.jsx)(n.X,{className:"h-4 w-4"})})]},c)}),(0,b.jsxs)(w.Select,{onValueChange:a=>{a&&!_.assignedTo.includes(a)&&aa({..._,assignedTo:[..._.assignedTo,a]})},children:[(0,b.jsx)(w.SelectTrigger,{children:(0,b.jsx)(w.SelectValue,{placeholder:"Select employee(s)"})}),(0,b.jsx)(w.SelectContent,{children:V.filter(a=>!_.assignedTo.includes(a._id)).map(a=>(0,b.jsxs)(w.SelectItem,{value:a._id,children:[a.firstName," ",a.lastName," - ",a.designation]},a._id))})]})]})]}),(0,b.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,b.jsx)(r.Button,{type:"button",variant:"outline",onClick:()=>Q(!1),children:"Cancel"}),(0,b.jsx)(r.Button,{type:"submit",children:"Create Task"})]})]})]})]})]}),T&&(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,b.jsxs)(q.Card,{children:[(0,b.jsxs)(q.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(q.CardTitle,{className:"text-sm font-medium",children:"Total Tasks"}),(0,b.jsx)(e.FileText,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsx)(q.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl font-bold",children:T.totalTasks||0})})]}),(0,b.jsxs)(q.Card,{children:[(0,b.jsxs)(q.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(q.CardTitle,{className:"text-sm font-medium",children:"In Progress"}),(0,b.jsx)(l.Clock,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsx)(q.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:T.byStatus?.in_progress||0})})]}),(0,b.jsxs)(q.Card,{children:[(0,b.jsxs)(q.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(q.CardTitle,{className:"text-sm font-medium",children:"Completed"}),(0,b.jsx)(k.CheckCircle,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsx)(q.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl font-bold text-green-600",children:T.byStatus?.completed||0})})]}),(0,b.jsxs)(q.Card,{children:[(0,b.jsxs)(q.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(q.CardTitle,{className:"text-sm font-medium",children:"Overdue"}),(0,b.jsx)(m.AlertTriangle,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsx)(q.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl font-bold text-red-600",children:T.overdueTasks||0})})]})]}),(0,b.jsx)(q.Card,{children:(0,b.jsx)(q.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,b.jsxs)("div",{className:"flex-1 relative",children:[(0,b.jsx)(g.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),(0,b.jsx)(s.Input,{placeholder:"Search tasks...",value:D,onChange:a=>K(a.target.value),className:"pl-10"})]}),(0,b.jsxs)(w.Select,{value:L,onValueChange:M,children:[(0,b.jsx)(w.SelectTrigger,{className:"w-40",children:(0,b.jsx)(w.SelectValue,{placeholder:"All Status"})}),(0,b.jsxs)(w.SelectContent,{children:[(0,b.jsx)(w.SelectItem,{value:"all",children:"All Status"}),(0,b.jsx)(w.SelectItem,{value:"pending",children:"Pending"}),(0,b.jsx)(w.SelectItem,{value:"in_progress",children:"In Progress"}),(0,b.jsx)(w.SelectItem,{value:"completed",children:"Completed"}),(0,b.jsx)(w.SelectItem,{value:"overdue",children:"Overdue"})]})]}),(0,b.jsxs)(w.Select,{value:N,onValueChange:O,children:[(0,b.jsx)(w.SelectTrigger,{className:"w-40",children:(0,b.jsx)(w.SelectValue,{placeholder:"All Priority"})}),(0,b.jsxs)(w.SelectContent,{children:[(0,b.jsx)(w.SelectItem,{value:"all",children:"All Priority"}),(0,b.jsx)(w.SelectItem,{value:"low",children:"Low"}),(0,b.jsx)(w.SelectItem,{value:"medium",children:"Medium"}),(0,b.jsx)(w.SelectItem,{value:"high",children:"High"}),(0,b.jsx)(w.SelectItem,{value:"critical",children:"Critical"})]})]})]})})}),(0,b.jsxs)(q.Card,{children:[(0,b.jsxs)(q.CardHeader,{children:[(0,b.jsx)(q.CardTitle,{children:"Tasks"}),(0,b.jsxs)(q.CardDescription,{children:[af.length," of ",p.length," tasks"]})]}),(0,b.jsx)(q.CardContent,{children:0===af.length?(0,b.jsxs)("div",{className:"text-center py-8",children:[(0,b.jsx)(e.FileText,{className:"mx-auto h-12 w-12 text-muted-foreground"}),(0,b.jsx)("h3",{className:"mt-2 text-sm font-semibold",children:"No tasks found"}),(0,b.jsx)("p",{className:"mt-1 text-sm text-muted-foreground",children:"Try adjusting your search or filters"})]}):(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)(I.Table,{children:[(0,b.jsx)(I.TableHeader,{children:(0,b.jsxs)(I.TableRow,{children:[(0,b.jsx)(I.TableHead,{children:"Task"}),(0,b.jsx)(I.TableHead,{children:"Assignees"}),(0,b.jsx)(I.TableHead,{children:"Status"}),(0,b.jsx)(I.TableHead,{children:"Priority"}),(0,b.jsx)(I.TableHead,{children:"Progress"}),(0,b.jsx)(I.TableHead,{children:"Due Date"}),(0,b.jsx)(I.TableHead,{children:"Actions"})]})}),(0,b.jsx)(I.TableBody,{children:af.map(c=>(0,b.jsxs)(I.TableRow,{children:[(0,b.jsx)(I.TableCell,{children:(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium",children:c.title}),(0,b.jsx)("div",{className:"text-sm text-muted-foreground line-clamp-1",children:c.description}),c.project&&(0,b.jsx)(x.Badge,{variant:"outline",className:"mt-1",children:c.project.name})]})}),(0,b.jsx)(I.TableCell,{children:(0,b.jsx)("div",{className:"flex flex-wrap gap-1",children:c.assignedTo?.map((a,c)=>(0,b.jsxs)(x.Badge,{variant:"secondary",className:"text-xs",children:[a.user?.firstName," ",a.user?.lastName]},c))||(0,b.jsx)("span",{className:"text-muted-foreground",children:"Unassigned"})})}),(0,b.jsx)(I.TableCell,{children:(0,b.jsx)(x.Badge,{variant:"completed"===c.status?"default":"in_progress"===c.status?"secondary":"overdue"===c.status?"destructive":"outline",children:c.status.replace("_"," ")})}),(0,b.jsx)(I.TableCell,{children:(0,b.jsx)(x.Badge,{className:ag(c.priority),children:c.priority})}),(0,b.jsx)(I.TableCell,{children:(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)(y.Progress,{value:c.progress?.percentage||0,className:"w-16"}),(0,b.jsxs)("div",{className:"text-xs text-muted-foreground",children:[c.progress?.percentage||0,"%"]})]})}),(0,b.jsx)(I.TableCell,{children:c.dueDate?new Date(c.dueDate).toLocaleDateString():"-"}),(0,b.jsx)(I.TableCell,{children:(0,b.jsxs)("div",{className:"flex gap-1",children:[(0,b.jsx)(r.Button,{variant:"ghost",size:"sm",onClick:()=>S(c),children:(0,b.jsx)(h.Eye,{className:"h-4 w-4"})}),c.assignedTo?.some(b=>b.user._id===a._id)&&(0,b.jsxs)(b.Fragment,{children:["pending"===c.status&&(0,b.jsx)(r.Button,{variant:"ghost",size:"sm",onClick:()=>ah(c._id),disabled:Z===c._id,children:(0,b.jsx)(i.Play,{className:"h-4 w-4"})}),"in_progress"===c.status&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(r.Button,{variant:"ghost",size:"sm",onClick:()=>ai(c._id),disabled:Z===c._id,children:(0,b.jsx)(j.Square,{className:"h-4 w-4"})}),(0,b.jsx)(r.Button,{variant:"ghost",size:"sm",onClick:()=>aj(c._id),disabled:Z===c._id,children:(0,b.jsx)(k.CheckCircle,{className:"h-4 w-4"})})]})]})]})})]},c._id))})]})})})]}),R&&(0,b.jsx)(A,{open:!!R,onOpenChange:()=>S(null),children:(0,b.jsxs)(E,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[(0,b.jsxs)(F,{children:[(0,b.jsx)(G,{children:R.title}),(0,b.jsx)(H,{children:R.description})]}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,b.jsxs)("div",{className:"text-center p-4 bg-muted rounded-lg",children:[(0,b.jsxs)("div",{className:"text-2xl font-bold",children:[R.progress?.percentage||0,"%"]}),(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Progress"})]}),(0,b.jsxs)("div",{className:"text-center p-4 bg-muted rounded-lg",children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:R.assignedTo?.length||0}),(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Assignees"})]}),(0,b.jsxs)("div",{className:"text-center p-4 bg-muted rounded-lg",children:[(0,b.jsxs)("div",{className:"text-2xl font-bold",children:[R.timeTracking?.totalTimeSpent?Math.round(R.timeTracking.totalTimeSpent/36e5):0,"h"]}),(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Time Spent"})]}),(0,b.jsxs)("div",{className:"text-center p-4 bg-muted rounded-lg",children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:R.daysUntilDue||0}),(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Days Left"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold",children:"Task Information"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Status:"}),(0,b.jsx)(x.Badge,{variant:"completed"===R.status?"default":"in_progress"===R.status?"secondary":"overdue"===R.status?"destructive":"outline",children:R.status.replace("_"," ")})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Priority:"}),(0,b.jsx)(x.Badge,{className:ag(R.priority),children:R.priority})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Due Date:"}),(0,b.jsx)("span",{children:new Date(R.dueDate).toLocaleDateString()})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Estimated Hours:"}),(0,b.jsx)("span",{children:R.estimatedHours||"-"})]}),R.project&&(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Project:"}),(0,b.jsx)("span",{children:R.project.name})]})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold",children:"Assignees"}),(0,b.jsx)("div",{className:"space-y-2",children:R.assignedTo?.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-2 bg-muted rounded",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"font-medium",children:[a.user?.firstName," ",a.user?.lastName]}),(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:a.role})]}),(0,b.jsx)(x.Badge,{variant:"outline",children:a.user?.designation})]},c))||(0,b.jsx)("div",{className:"text-muted-foreground",children:"No assignees"})})]})]}),R.assignedTo?.some(b=>b.user._id===a._id)&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold",children:"Update Progress"}),(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)(t.Label,{htmlFor:"progress",children:"Progress (%)"}),(0,b.jsx)(s.Input,{id:"progress",type:"number",min:"0",max:"100",placeholder:"Enter progress percentage"})]}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)(t.Label,{htmlFor:"phase",children:"Current Phase"}),(0,b.jsxs)(w.Select,{children:[(0,b.jsx)(w.SelectTrigger,{children:(0,b.jsx)(w.SelectValue,{placeholder:"Select phase"})}),(0,b.jsxs)(w.SelectContent,{children:[(0,b.jsx)(w.SelectItem,{value:"planning",children:"Planning"}),(0,b.jsx)(w.SelectItem,{value:"development",children:"Development"}),(0,b.jsx)(w.SelectItem,{value:"testing",children:"Testing"}),(0,b.jsx)(w.SelectItem,{value:"review",children:"Review"}),(0,b.jsx)(w.SelectItem,{value:"deployment",children:"Deployment"})]})]})]}),(0,b.jsx)("div",{className:"flex items-end",children:(0,b.jsx)(r.Button,{onClick:()=>{let a=document.getElementById("progress"),b=document.querySelector('[name="phase"]');al(R._id,parseInt(a.value)||0,b?.value||"")},children:"Update"})})]})]})]})]})})]})}}];

//# sourceMappingURL=src_app_tasks_page_jsx_bc8ab7cc._.js.map